import{j as i}from"./jsx-runtime-ffb262ed.js";import{R as n}from"./index-76fb7be0.js";import{R as w}from"./RichTexts-067bd1c7.js";var f="https://platform.twitter.com/widgets.js",s="createTweet",p=function(t){var r=n.useRef(null),o=n.useState(!0),d=o[0],l=o[1];return n.useEffect(function(){var a=!0,m=require("scriptjs");return m(f,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(a){if(!window.twttr.widgets[s]){console.error("Method "+s+" is not present anymore in twttr.widget api");return}window.twttr.widgets[s](t.tweetId,r==null?void 0:r.current,t.options).then(function(u){l(!1),t.onLoad&&t.onLoad(u)})}}),function(){a=!1}},[]),n.createElement(n.Fragment,null,d&&n.createElement(n.Fragment,null,t.placeholder),n.createElement("div",{ref:r}))};const c=({block:e})=>{const t=b(e.embed.url);return t?i.jsx(p,{options:{theme:"dark"},tweetId:t}):i.jsxs("div",{id:e.id,className:"notion_embed",children:[i.jsx("iframe",{src:e.embed.url,title:"notion embed content"}),i.jsx("div",{className:"notion_caption notion_embed_caption",children:i.jsx(w,{richTexts:e.embed.caption})})]})},b=e=>{if(!h(e))return null;const t=[/https?:\/\/twitter\.com\/(\w+)\/status(es)?\/(\d+)/,/https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(es)?\/(\d+)/,/https?:\/\/mobile\.twitter\.com\/(\w+)\/status(es)?\/(\d+)/];for(const r of t){const o=e.match(r);if(o)return o[o.length-1]}return null},h=e=>g(e)?/^https?:\/\/(?:www\.|mobile\.)?twitter\.com\/(?:#!\/)?([a-zA-Z0-9_]{1,15})\/status(?:es)?\/(\d+)(?:\?.*)?$/.test(e):!1,g=e=>{const t=["twitter.com","www.twitter.com","mobile.twitter.com"];try{const r=new URL(e);return t.includes(r.hostname)}catch{return!1}};try{c.displayName="Embed",c.__docgenInfo={description:"",displayName:"Embed",props:{block:{defaultValue:null,description:"",name:"block",required:!0,type:{name:"EmbedBlockObjectResponse"}},blocks:{defaultValue:null,description:"",name:"blocks",required:!1,type:{name:"BlockObjectComponent[]"}},customBlockComponentMapper:{defaultValue:null,description:"",name:"customBlockComponentMapper",required:!1,type:{name:"object"}}}}}catch{}export{c as E};
//# sourceMappingURL=Embed-6102743a.js.map
